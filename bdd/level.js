const a9_0x40b88e=a9_0x5717;function a9_0x5717(_0xc9e90b,_0x211879){const _0xf6a6ee=a9_0x2103();return a9_0x5717=function(_0x1a1d78,_0x33b1f7){_0x1a1d78=_0x1a1d78-0x1c9;let _0x210344=_0xf6a6ee[_0x1a1d78];return _0x210344;},a9_0x5717(_0xc9e90b,_0x211879);}(function(_0x47994d,_0x1d3002){const _0x8c6b9a=a9_0x5717,_0x1eecab=_0x47994d();while(!![]){try{const _0x2863f1=parseInt(_0x8c6b9a(0x1d5))/0x1*(parseInt(_0x8c6b9a(0x1e2))/0x2)+-parseInt(_0x8c6b9a(0x1df))/0x3*(-parseInt(_0x8c6b9a(0x1cd))/0x4)+parseInt(_0x8c6b9a(0x1e4))/0x5+-parseInt(_0x8c6b9a(0x1d2))/0x6+parseInt(_0x8c6b9a(0x1e5))/0x7+parseInt(_0x8c6b9a(0x1cc))/0x8*(-parseInt(_0x8c6b9a(0x1ce))/0x9)+-parseInt(_0x8c6b9a(0x1db))/0xa;if(_0x2863f1===_0x1d3002)break;else _0x1eecab['push'](_0x1eecab['shift']());}catch(_0x32abcc){_0x1eecab['push'](_0x1eecab['shift']());}}}(a9_0x2103,0x66c7e),require(a9_0x40b88e(0x1d8))['config']());const {Pool}=require('pg'),s=require(a9_0x40b88e(0x1da)),dbUrl=s[a9_0x40b88e(0x1e3)]?s[a9_0x40b88e(0x1e3)]:a9_0x40b88e(0x1d4),proConfig={'connectionString':dbUrl,'ssl':{'rejectUnauthorized':![]}},pool=new Pool(proConfig);async function createUsersRankTable(){const _0x54ce72=a9_0x40b88e,_0x5e79ef=(function(){let _0x2e1954=!![];return function(_0x3e3c00,_0x2764ea){const _0x47355a=_0x2e1954?function(){if(_0x2764ea){const _0x4d79bf=_0x2764ea['apply'](_0x3e3c00,arguments);return _0x2764ea=null,_0x4d79bf;}}:function(){};return _0x2e1954=![],_0x47355a;};}()),_0x2684ef=_0x5e79ef(this,function(){const _0x2b59a3=a9_0x5717;return _0x2684ef['toString']()[_0x2b59a3(0x1cf)](_0x2b59a3(0x1d9))['toString']()['constructor'](_0x2684ef)[_0x2b59a3(0x1cf)](_0x2b59a3(0x1d9));});_0x2684ef();const _0x28dc6e=await pool[_0x54ce72(0x1d6)]();try{await _0x28dc6e['query'](_0x54ce72(0x1d1));}catch(_0x21f58b){console['error'](_0x54ce72(0x1dc),_0x21f58b);}finally{_0x28dc6e[_0x54ce72(0x1d3)]();}}function a9_0x2103(){const _0x28f46a=['query','\x0a\x20\x20\x20\x20\x20\x20CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20users_rank\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20SERIAL\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20jid\x20VARCHAR(255)\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20xp\x20INTEGER\x20DEFAULT\x200,\x0a\x20\x20\x20\x20\x20\x20\x20\x20messages\x20INTEGER\x20DEFAULT\x200\x0a\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20','957840cxiqbe','release','postgres://db_7xp9_user:6hwmTN7rGPNsjlBEHyX49CXwrG7cDeYi@dpg-cj7ldu5jeehc73b2p7g0-a.oregon-postgres.render.com/db_7xp9','1WVwlYX','connect','Erreur\x20lors\x20de\x20la\x20récupération\x20des\x20données\x20de\x20l\x27utilisateur:','dotenv','(((.+)+)+)+$','../set','624050UAvCMU','Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20users_rank:','error','exports','1464726qYnIjN','UPDATE\x20users_rank\x20SET\x20xp\x20=\x20xp\x20+\x2010,\x20messages\x20=\x20messages\x20+\x201\x20WHERE\x20jid\x20=\x20$1','length','85406wfoVnQ','DATABASE_URL','143355UgjQIr','3849895sfOaEV','rows','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20bottom\x2010\x20des\x20utilisateurs:','SELECT\x20*\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1','48qDhkUq','4egDxMI','699849lYqatb','search'];a9_0x2103=function(){return _0x28f46a;};return a9_0x2103();}async function ajouterOuMettreAJourUserData(_0x572241){const _0x1decaf=a9_0x40b88e,_0x47b496=await pool[_0x1decaf(0x1d6)]();try{const _0x30a3eb=await _0x47b496[_0x1decaf(0x1d0)](_0x1decaf(0x1cb),[_0x572241]),_0x133819=_0x30a3eb[_0x1decaf(0x1c9)][_0x1decaf(0x1e1)]>0x0;_0x133819?await _0x47b496['query'](_0x1decaf(0x1e0),[_0x572241]):await _0x47b496[_0x1decaf(0x1d0)]('INSERT\x20INTO\x20users_rank\x20(jid,\x20xp,\x20messages)\x20VALUES\x20($1,\x20$2,\x20$3)',[_0x572241,0xa,0x1]);}catch(_0x730dfc){console[_0x1decaf(0x1dd)]('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20de\x20l\x27utilisateur:',_0x730dfc);}finally{_0x47b496[_0x1decaf(0x1d3)]();}};async function getMessagesAndXPByJID(_0x545813){const _0x5ac36b=a9_0x40b88e,_0x5dcfad=await pool[_0x5ac36b(0x1d6)]();try{const _0x3d2e03='SELECT\x20messages,\x20xp\x20FROM\x20users_rank\x20WHERE\x20jid\x20=\x20$1',_0x2f5a51=await _0x5dcfad['query'](_0x3d2e03,[_0x545813]);if(_0x2f5a51[_0x5ac36b(0x1c9)][_0x5ac36b(0x1e1)]>0x0){const {messages:_0x18d9a6,xp:_0xddac7e}=_0x2f5a51['rows'][0x0];return{'messages':_0x18d9a6,'xp':_0xddac7e};}else return{'messages':0x0,'xp':0x0};}catch(_0x22908f){return console[_0x5ac36b(0x1dd)](_0x5ac36b(0x1d7),_0x22908f),{'messages':0x0,'xp':0x0};}finally{_0x5dcfad[_0x5ac36b(0x1d3)]();}}async function getBottom10Users(){const _0x54b41e=a9_0x40b88e,_0x357528=await pool[_0x54b41e(0x1d6)]();try{const _0x2dfbc5='SELECT\x20jid,\x20xp\x20,\x20messages\x20FROM\x20users_rank\x20ORDER\x20BY\x20xp\x20DESC\x20LIMIT\x2010',_0x3fde43=await _0x357528['query'](_0x2dfbc5);return _0x3fde43[_0x54b41e(0x1c9)];}catch(_0x15d82b){return console[_0x54b41e(0x1dd)](_0x54b41e(0x1ca),_0x15d82b),[];}finally{_0x357528[_0x54b41e(0x1d3)]();}}createUsersRankTable(),module[a9_0x40b88e(0x1de)]={'ajouterOuMettreAJourUserData':ajouterOuMettreAJourUserData,'getMessagesAndXPByJID':getMessagesAndXPByJID,'getBottom10Users':getBottom10Users};